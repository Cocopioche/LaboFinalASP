@using ChatManager.Models
@model IEnumerable<ChatManager.Models.Message>
@{
    ViewBag.Title = "GetMessages";

}



<div class="messagesHeader">
 
   

    @if ((ChatManager.Models.User)Session["CurrentTarget"] == null)
    {

        <h4>Sélectionnez un ami</h4>
    }
    else
    {
        User user = (ChatManager.Models.User)Session["CurrentTarget"];

        @Helper.convUserChat(user);
    }


</div>

<div>
    @if (Model != null)
    {
        foreach (var item in Model)
        {
            User user = (ChatManager.Models.User)Session["CurrentTarget"];
            if (Session["CurrentTarget"] != null)
            {
                if (item.IdUserOther == user.Id)
                {
                    

                    <div class="sentLayout">
                        <div class="sent" title="@item.PostingTime.Hour" id="sent_@item.Id">
                            <span class="token"> @Helper.ParseContent(@item.Text)</span>

                        </div>

                    </div>
                    <div class="editMessage" id="edit_@item.Id">
                        <input id="@item.Id" value="@item.Text" class="sent form-control">
                        <span class="icon fa fa-check smallerIcon" title="Modifier ce massage" data-placement="bottom"></span>
                        <span class="icon fa fa-times smallerIcon" title="Effacer ce massage" data-placement="bottom"></span>
                    </div>


                }
                else if (item.IdUserMain == OnlineUsers.GetSessionUser().Id)
                {
                    <div class="receivedLayout">
                        <div class="received">
                            <span> @item.Text</span>

                        </div>

                    </div>

                }

            }


        }

    }



</div>
